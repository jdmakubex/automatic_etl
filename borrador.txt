// Comandos para instalar el driver de conexion clickhouse  en superset
:: 1) Crear/rehabilitar el venv y pip como root
docker exec -u 0 -it superset bash -lc "python -m venv /app/.venv && /app/.venv/bin/python -m ensurepip --upgrade"

:: 2) Instalar drivers en ESE venv
docker exec -u 0 -it superset bash -lc "/app/.venv/bin/pip install --upgrade pip setuptools wheel && /app/.venv/bin/pip install clickhouse-connect==0.7.19 clickhouse-sqlalchemy==0.2.6"

:: 3) Dar propiedad al usuario runtime (opcional pero recomendado)
docker exec -u 0 -it superset bash -lc "chown -R superset:superset /app/.venv"

:: 4) Verificar import usando el python del venv
docker exec -it superset bash -lc "/app/.venv/bin/python -c \"import clickhouse_connect, sqlalchemy; print('OK drivers')\""

:: 5) Reiniciar Superset para que coja el entorno
docker compose restart superset

pendiente agregarlo diretamente al compose